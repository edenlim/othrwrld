{"ast":null,"code":"console.log(\"WORKINGS\");\nvar graph = {\n  nodes: [{\n    id: 1,\n    name: \"Jane Hutton\",\n    qualities: \"{Hair: Red}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.738Z\",\n    updated_at: \"2019-12-02T06:44:39.738Z\"\n  }, {\n    id: 2,\n    name: \"Hiro Smith\",\n    qualities: \"{Hair: Black}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.751Z\",\n    updated_at: \"2019-12-02T06:44:39.751Z\"\n  }, {\n    id: 3,\n    name: \"Marie Alex\",\n    qualities: \"{Hair: Rainbow}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.760Z\",\n    updated_at: \"2019-12-02T06:44:39.760Z\"\n  }, {\n    id: 4,\n    name: \"Roxanne Mecure\",\n    qualities: \"{Hair: Black and white}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.766Z\",\n    updated_at: \"2019-12-02T06:44:39.766Z\"\n  }, {\n    id: 5,\n    name: \"Debra\",\n    qualities: \"{Hair: Black}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.772Z\",\n    updated_at: \"2019-12-02T06:44:39.772Z\"\n  }, {\n    id: 6,\n    name: \"Harry Powers\",\n    qualities: \"{}\",\n    user_id: 1,\n    created_at: \"2019-12-02T07:52:26.376Z\",\n    updated_at: \"2019-12-02T07:52:26.376Z\"\n  }],\n  links: [{\n    id: 1,\n    character_id: 1,\n    character2: 2,\n    affiliation: \"Cousin\",\n    created_at: \"2019-12-02T06:44:39.800Z\",\n    updated_at: \"2019-12-02T06:44:39.800Z\"\n  }, {\n    id: 2,\n    character_id: 1,\n    character2: 4,\n    affiliation: \"Friend\",\n    created_at: \"2019-12-02T06:44:39.811Z\",\n    updated_at: \"2019-12-02T06:44:39.811Z\"\n  }, {\n    id: 3,\n    character_id: 2,\n    character2: 3,\n    affiliation: \"Friend\",\n    created_at: \"2019-12-02T06:44:39.819Z\",\n    updated_at: \"2019-12-02T06:44:39.819Z\"\n  }, {\n    id: 4,\n    character_id: 2,\n    character2: 5,\n    affiliation: \"Couple\",\n    created_at: \"2019-12-02T06:44:39.830Z\",\n    updated_at: \"2019-12-02T06:44:39.830Z\"\n  }, {\n    id: 5,\n    character_id: 3,\n    character2: 5,\n    affiliation: \"Friend\",\n    created_at: \"2019-12-02T06:44:39.843Z\",\n    updated_at: \"2019-12-02T06:44:39.843Z\"\n  }]\n};\nvar svg = d3.select(\"body\").append('svg'),\n    width = svg.attr(\"width\"),\n    height = svg.attr(\"height\");\nvar force = d3.forceSimulation().nodes(d3.values(nodes)).force(\"link\", d3.forceLink(links).distance(60)).force('center', d3.forceCenter(width / 2, height / 2)).force(\"x\", d3.forceX(width / 2)) // fix jumpiness by centering svg\n.force(\"y\", d3.forceY(height / 2)) // fix jumpiness by centering svg\n.force(\"charge\", d3.forceManyBody().strength(-250)).alphaTarget(1).on(\"tick\", tick);\nvar simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n  return d.id;\n})).force(\"charge\", d3.forceManyBody().strength(-400)).force(\"center\", d3.forceCenter(600 / 2, 600 / 2)); // d3.json(\"/characters/all/d3json#\", function(error, graph) {\n//   if (error) throw error;\n\ngraph.links.forEach(function (d) {\n  d.source = d.character_id;\n  d.target = d.character2;\n});\nvar link = svg.append(\"g\").style(\"stroke\", \"#aaa\").selectAll(\"line\").data(graph.links).enter().append(\"line\");\nvar node = svg.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 6).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\nvar label = svg.append(\"g\").attr(\"class\", \"labels\").selectAll(\"text\").data(graph.nodes).enter().append(\"text\").attr(\"class\", \"label\").text(function (d) {\n  return d.name;\n});\nsimulation.nodes(graph.nodes).on(\"tick\", ticked);\nsimulation.force(\"link\").links(graph.links);\n\nfunction ticked() {\n  link.attr(\"x1\", function (d) {\n    return d.source.x;\n  }).attr(\"y1\", function (d) {\n    return d.source.y;\n  }).attr(\"x2\", function (d) {\n    return d.target.x;\n  }).attr(\"y2\", function (d) {\n    return d.target.y;\n  });\n  node.attr(\"r\", 10).style(\"fill\", \"#d9d9d9\").style(\"stroke\", \"#969696\").style(\"stroke-width\", \"1px\").style(\"text-align\", \"center\").attr(\"cx\", function (d) {\n    return d.x + 6;\n  }).attr(\"cy\", function (d) {\n    return d.y - 6;\n  });\n  label.attr(\"x\", function (d) {\n    return d.x;\n  }).attr(\"y\", function (d) {\n    return d.y;\n  }).style(\"font-size\", \"15px\").style(\"fill\", \"#4393c3\");\n} // });\n\n\nfunction dblclick(d) {\n  if (!d3.event.active) {\n    force.alphaTarget(0.3).restart();\n  }\n\n  if (d.fixed == true) {\n    d.fx = null;\n    d.fy = null;\n    d.fixed = false;\n    d3.select(this).select(\"circle\").style(\"fill\", \"#ccc\");\n  } else {\n    d.fx = d.x;\n    d.fy = d.y;\n    d.fixed = true;\n    d3.select(this).select(\"circle\").style(\"fill\", \"red\");\n  }\n}\n\n;\n\nfunction dragstarted(d) {\n  if (!d3.event.active) {\n    force.alphaTarget(0.3).restart();\n  }\n\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\n;\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\n;\n\nfunction dragended(d) {\n  if (!d3.event.active) force.alphaTarget(0);\n\n  if (d.fixed == true) {\n    d.fx = d.x;\n    d.fy = d.y;\n  } else {\n    d.fx = null;\n    d.fy = null;\n  }\n}\n\n; // function dragstarted(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0.3).restart()\n//   simulation.fix(d);\n// }\n// function dragged(d) {\n//   simulation.fix(d, d3.event.x, d3.event.y);\n// }\n// function dragended(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0);\n//   simulation.unfix(d);\n// }","map":{"version":3,"sources":["/Users/eden/originalProject/GAProject4/othrwrld/app/javascript/packs/d3Graph/test.js"],"names":["console","log","graph","nodes","id","name","qualities","user_id","created_at","updated_at","links","character_id","character2","affiliation","svg","d3","select","append","width","attr","height","force","forceSimulation","values","forceLink","distance","forceCenter","forceX","forceY","forceManyBody","strength","alphaTarget","on","tick","simulation","d","forEach","source","target","link","style","selectAll","data","enter","node","call","drag","dragstarted","dragged","dragended","label","text","ticked","x","y","dblclick","event","active","restart","fixed","fx","fy"],"mappings":"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","sourcesContent":["console.log(\"WORKINGS\")\n\nvar graph = {\nnodes: [\n{\nid: 1,\nname: \"Jane Hutton\",\nqualities: \"{Hair: Red}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.738Z\",\nupdated_at: \"2019-12-02T06:44:39.738Z\"\n},\n{\nid: 2,\nname: \"Hiro Smith\",\nqualities: \"{Hair: Black}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.751Z\",\nupdated_at: \"2019-12-02T06:44:39.751Z\"\n},\n{\nid: 3,\nname: \"Marie Alex\",\nqualities: \"{Hair: Rainbow}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.760Z\",\nupdated_at: \"2019-12-02T06:44:39.760Z\"\n},\n{\nid: 4,\nname: \"Roxanne Mecure\",\nqualities: \"{Hair: Black and white}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.766Z\",\nupdated_at: \"2019-12-02T06:44:39.766Z\"\n},\n{\nid: 5,\nname: \"Debra\",\nqualities: \"{Hair: Black}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.772Z\",\nupdated_at: \"2019-12-02T06:44:39.772Z\"\n},\n{\nid: 6,\nname: \"Harry Powers\",\nqualities: \"{}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T07:52:26.376Z\",\nupdated_at: \"2019-12-02T07:52:26.376Z\"\n}\n],\nlinks: [\n{\nid: 1,\ncharacter_id: 1,\ncharacter2: 2,\naffiliation: \"Cousin\",\ncreated_at: \"2019-12-02T06:44:39.800Z\",\nupdated_at: \"2019-12-02T06:44:39.800Z\"\n},\n{\nid: 2,\ncharacter_id: 1,\ncharacter2: 4,\naffiliation: \"Friend\",\ncreated_at: \"2019-12-02T06:44:39.811Z\",\nupdated_at: \"2019-12-02T06:44:39.811Z\"\n},\n{\nid: 3,\ncharacter_id: 2,\ncharacter2: 3,\naffiliation: \"Friend\",\ncreated_at: \"2019-12-02T06:44:39.819Z\",\nupdated_at: \"2019-12-02T06:44:39.819Z\"\n},\n{\nid: 4,\ncharacter_id: 2,\ncharacter2: 5,\naffiliation: \"Couple\",\ncreated_at: \"2019-12-02T06:44:39.830Z\",\nupdated_at: \"2019-12-02T06:44:39.830Z\"\n},\n{\nid: 5,\ncharacter_id: 3,\ncharacter2: 5,\naffiliation: \"Friend\",\ncreated_at: \"2019-12-02T06:44:39.843Z\",\nupdated_at: \"2019-12-02T06:44:39.843Z\"\n}\n]\n}\n\nvar svg = d3.select(\"body\").append('svg'),\n    width = svg.attr(\"width\"),\n    height = svg.attr(\"height\");\n\nvar force = d3.forceSimulation()\n    .nodes(d3.values(nodes))\n    .force(\"link\", d3.forceLink(links).distance(60))\n    .force('center', d3.forceCenter(width / 2, height / 2))\n    .force(\"x\", d3.forceX(width/2)) // fix jumpiness by centering svg\n    .force(\"y\", d3.forceY(height/2)) // fix jumpiness by centering svg\n    .force(\"charge\", d3.forceManyBody().strength(-250))\n    .alphaTarget(1)\n    .on(\"tick\", tick);\n\nvar simulation = d3.forceSimulation()\n    .force(\"link\", d3.forceLink().id(function(d) { return d.id; }))\n    .force(\"charge\", d3.forceManyBody().strength(-400))\n    .force(\"center\", d3.forceCenter(600 / 2 , 600 / 2));\n\n\n// d3.json(\"/characters/all/d3json#\", function(error, graph) {\n//   if (error) throw error;\n\n  graph.links.forEach(function(d){\n    d.source = d.character_id;\n    d.target = d.character2;\n  });\n\n  var link = svg.append(\"g\")\n                .style(\"stroke\", \"#aaa\")\n                .selectAll(\"line\")\n                .data(graph.links)\n                .enter().append(\"line\");\n\n  var node = svg.append(\"g\")\n            .attr(\"class\", \"nodes\")\n  .selectAll(\"circle\")\n            .data(graph.nodes)\n  .enter().append(\"circle\")\n          .attr(\"r\", 6)\n          .call(d3.drag()\n              .on(\"start\", dragstarted)\n              .on(\"drag\", dragged)\n              .on(\"end\", dragended));\n\n  var label = svg.append(\"g\")\n      .attr(\"class\", \"labels\")\n      .selectAll(\"text\")\n      .data(graph.nodes)\n      .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .text(function(d) { return d.name; });\n\n  simulation\n      .nodes(graph.nodes)\n      .on(\"tick\", ticked);\n\n  simulation.force(\"link\")\n      .links(graph.links);\n\n  function ticked() {\n    link\n        .attr(\"x1\", function(d) { return d.source.x; })\n        .attr(\"y1\", function(d) { return d.source.y; })\n        .attr(\"x2\", function(d) { return d.target.x; })\n        .attr(\"y2\", function(d) { return d.target.y; });\n\n    node\n        .attr(\"r\", 10)\n        .style(\"fill\", \"#d9d9d9\")\n        .style(\"stroke\", \"#969696\")\n        .style(\"stroke-width\", \"1px\")\n        .style(\"text-align\",\"center\")\n        .attr(\"cx\", function (d) { return d.x+6; })\n        .attr(\"cy\", function(d) { return d.y-6; });\n\n    label\n        .attr(\"x\", function(d) { return d.x; })\n        .attr(\"y\", function (d) { return d.y; })\n        .style(\"font-size\", \"15px\").style(\"fill\", \"#4393c3\");\n  }\n// });\n\nfunction dblclick(d) {\n  if (!d3.event.active) {\n    force.alphaTarget(0.3).restart();\n  }\n  if (d.fixed == true) {\n    d.fx = null;\n    d.fy = null;\n    d.fixed = false;\n    d3.select(this).select(\"circle\").style(\"fill\", \"#ccc\");\n  }\n  else {\n    d.fx = d.x;\n    d.fy = d.y;\n    d.fixed = true;\n    d3.select(this).select(\"circle\").style(\"fill\", \"red\");\n  }\n};\n\nfunction dragstarted(d) {\n      if (!d3.event.active) {\n        force.alphaTarget(0.3).restart();\n      }\n      d.fx = d.x;\n      d.fy = d.y;\n    };\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n};\n\nfunction dragended(d) {\n  if (!d3.event.active) force.alphaTarget(0);\n  if (d.fixed == true) {\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n  else {\n    d.fx = null;\n    d.fy = null;\n  }\n};\n\n// function dragstarted(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0.3).restart()\n//   simulation.fix(d);\n// }\n\n// function dragged(d) {\n//   simulation.fix(d, d3.event.x, d3.event.y);\n// }\n\n// function dragended(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0);\n//   simulation.unfix(d);\n// }"]},"metadata":{},"sourceType":"module"}