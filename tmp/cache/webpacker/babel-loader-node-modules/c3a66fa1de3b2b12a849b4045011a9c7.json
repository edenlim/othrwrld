{"ast":null,"code":"console.log(\"test.js is WORKING\"); //<------ D3 ------>\n\nvar svg = d3.select(\"#d3div\").append('svg'),\n    width = svg.attr(\"width\"),\n    height = svg.attr(\"height\");\nvar simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n  return d.id;\n})).force(\"charge\", d3.forceManyBody().strength(-50)).force(\"center\", d3.forceCenter(800 / 2, 800 / 2));\nd3.json(\"/characters/all/d3json#\", function (error, graph) {\n  if (error) throw error;\n  graph.links.forEach(function (d) {\n    d.source = d.character_id;\n    d.target = d.character2;\n  });\n  var link = svg.append(\"g\").style(\"stroke\", \"#aaa\").selectAll(\"line\").data(graph.links).enter().append(\"line\");\n  var node = svg.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 6).on(\"dblclick\", dblclick).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n  var label = svg.append(\"g\").attr(\"class\", \"labels\").selectAll(\"text\").data(graph.nodes).enter().append(\"text\").attr(\"class\", \"label\").text(function (d) {\n    return d.name;\n  }).style('text-anchor', \"middle\").style('dominant-baseline', \"hanging\").attr(\"y\", 5);\n  simulation.nodes(graph.nodes).on(\"tick\", ticked);\n  simulation.force(\"link\").links(graph.links);\n\n  function ticked() {\n    link.attr(\"x1\", function (d) {\n      return d.source.x;\n    }).attr(\"y1\", function (d) {\n      return d.source.y;\n    }).attr(\"x2\", function (d) {\n      return d.target.x;\n    }).attr(\"y2\", function (d) {\n      return d.target.y;\n    });\n    node.attr(\"r\", 10).style(\"fill\", \"#d9d9d9\") //Change this to change color\n    .style(\"stroke\", \"#969696\").style(\"stroke-width\", \"1px\").style(\"text-align\", \"center\").attr(\"cx\", function (d) {\n      return d.x + 6;\n    }).attr(\"cy\", function (d) {\n      return d.y - 6;\n    });\n    label.attr(\"x\", function (d) {\n      return d.x + 5;\n    }).attr(\"y\", function (d) {\n      return d.y - 25;\n    }).style(\"font-size\", \"10px\").style(\"fill\", \"#4393c3\");\n  }\n});\n\nfunction dblclick(d) {\n  if (!d3.event.active) {\n    simulation.alphaTarget(0.3).restart();\n  }\n\n  if (d.fixed == true) {\n    d.fx = null;\n    d.fy = null;\n    d.fixed = false;\n    d3.select(this).select(\"circle\").style(\"fill\", \"#ccc\");\n  } else {\n    d.fx = d.x;\n    d.fy = d.y;\n    d.fixed = true;\n    console.log(d3.select(this)[\"_groups\"][0][0]);\n    console.log(d3.select(this));\n    console.log(d3.select(this).select(\"circle\")); // d3.select(this)[\"_groups\"][0][0].style(\"fill\", \"red\")\n\n    d3.select(this).select(\"_groups\"[0][0]).select(\"circle\").style(\"fill\", \"red\");\n  }\n}\n\n;\n\nfunction dragstarted(d) {\n  if (!d3.event.active) {\n    simulation.alphaTarget(0.3).restart();\n  }\n\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\n;\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\n;\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n\n  if (d.fixed == true) {\n    d.fx = d.x;\n    d.fy = d.y;\n  } else {\n    d.fx = null;\n    d.fy = null;\n  }\n}\n\n; //<------ JS ------>\n\nvar hide = true;\nsvg.hidden = true;\nvar rlschart = document.getElementById(\"rls\");\nrlschart.addEventListener(\"click\", function () {\n  console.log(\"clicked\");\n\n  if (hide === true) {\n    svg.hidden = false;\n    hide = false;\n  } else {\n    svg.hidden = true;\n    hide = true;\n  }\n});","map":{"version":3,"sources":["/Users/eden/originalProject/GAProject4/othrwrld/app/javascript/packs/d3Graph/test.js"],"names":["console","log","svg","d3","select","append","width","attr","height","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","strength","forceCenter","json","error","graph","links","forEach","source","character_id","target","character2","link","style","selectAll","data","enter","node","nodes","on","dblclick","call","drag","dragstarted","dragged","dragended","label","text","name","ticked","x","y","event","active","alphaTarget","restart","fixed","fx","fy","hide","hidden","rlschart","document","getElementById","addEventListener"],"mappings":"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","sourcesContent":["console.log(\"test.js is WORKING\")\n\n//<------ D3 ------>\nvar svg = d3.select(\"#d3div\").append('svg'),\n    width = svg.attr(\"width\"),\n    height = svg.attr(\"height\");\n\nvar simulation = d3.forceSimulation()\n    .force(\"link\", d3.forceLink().id(function(d) { return d.id; }))\n    .force(\"charge\", d3.forceManyBody().strength(-50))\n    .force(\"center\", d3.forceCenter(800 / 2, 800 / 2));\n\n\nd3.json(\"/characters/all/d3json#\", function(error, graph) {\n    if (error) throw error;\n\n    graph.links.forEach(function(d) {\n        d.source = d.character_id;\n        d.target = d.character2;\n    });\n\n    var link = svg.append(\"g\")\n        .style(\"stroke\", \"#aaa\")\n        .selectAll(\"line\")\n        .data(graph.links)\n        .enter().append(\"line\");\n\n    var node = svg.append(\"g\")\n        .attr(\"class\", \"nodes\")\n        .selectAll(\"circle\")\n        .data(graph.nodes)\n        .enter().append(\"circle\")\n        .attr(\"r\", 6)\n        .on(\"dblclick\", dblclick)\n        .call(d3.drag()\n            .on(\"start\", dragstarted)\n            .on(\"drag\", dragged)\n            .on(\"end\", dragended));\n\n    var label = svg.append(\"g\")\n        .attr(\"class\", \"labels\")\n        .selectAll(\"text\")\n        .data(graph.nodes)\n        .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .text(function(d) { return d.name; })\n        .style('text-anchor', \"middle\")\n        .style('dominant-baseline', \"hanging\")\n        .attr(\"y\", 5);\n\n    simulation\n        .nodes(graph.nodes)\n        .on(\"tick\", ticked);\n\n    simulation.force(\"link\")\n        .links(graph.links);\n\n    function ticked() {\n        link\n            .attr(\"x1\", function(d) { return d.source.x; })\n            .attr(\"y1\", function(d) { return d.source.y; })\n            .attr(\"x2\", function(d) { return d.target.x; })\n            .attr(\"y2\", function(d) { return d.target.y; });\n\n        node\n            .attr(\"r\", 10)\n            .style(\"fill\", \"#d9d9d9\") //Change this to change color\n            .style(\"stroke\", \"#969696\")\n            .style(\"stroke-width\", \"1px\")\n            .style(\"text-align\", \"center\")\n            .attr(\"cx\", function(d) { return d.x + 6; })\n            .attr(\"cy\", function(d) { return d.y - 6; });\n\n        label\n            .attr(\"x\", function(d) { return d.x + 5; })\n            .attr(\"y\", function(d) { return d.y - 25; })\n            .style(\"font-size\", \"10px\").style(\"fill\", \"#4393c3\");\n    }\n});\n\nfunction dblclick(d) {\n    if (!d3.event.active) {\n        simulation.alphaTarget(0.3).restart();\n    }\n    if (d.fixed == true) {\n        d.fx = null;\n        d.fy = null;\n        d.fixed = false;\n        d3.select(this).select(\"circle\").style(\"fill\", \"#ccc\");\n    } else {\n        d.fx = d.x;\n        d.fy = d.y;\n        d.fixed = true;\n\n        console.log(d3.select(this)[\"_groups\"][0][0])\n        console.log(d3.select(this))\n        console.log(d3.select(this).select(\"circle\"))\n        // d3.select(this)[\"_groups\"][0][0].style(\"fill\", \"red\")\n        d3.select(this).select(\"_groups\"[0][0]).select(\"circle\").style(\"fill\", \"red\")\n\n    }\n};\n\nfunction dragstarted(d) {\n    if (!d3.event.active) {\n        simulation.alphaTarget(0.3).restart();\n    }\n    d.fx = d.x;\n    d.fy = d.y;\n};\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n};\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    if (d.fixed == true) {\n        d.fx = d.x;\n        d.fy = d.y;\n    } else {\n        d.fx = null;\n        d.fy = null;\n    }\n};\n\n//<------ JS ------>\nvar hide = true;\nsvg.hidden = true;\nvar rlschart = document.getElementById(\"rls\");\nrlschart.addEventListener(\"click\",function(){\n    console.log(\"clicked\")\n    if(hide === true){\n        svg.hidden = false;\n        hide = false;\n    } else {\n        svg.hidden = true;\n        hide = true;\n    }\n})"]},"metadata":{},"sourceType":"module"}