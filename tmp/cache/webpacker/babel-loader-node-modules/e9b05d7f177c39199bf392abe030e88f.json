{"ast":null,"code":"console.log(\"WORKINGS\");\nvar graph = {\n  nodes: [{\n    id: 1,\n    name: \"Jane Hutton\",\n    qualities: \"{Hair: Red}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.738Z\",\n    updated_at: \"2019-12-02T06:44:39.738Z\"\n  }, {\n    id: 2,\n    name: \"Hiro Smith\",\n    qualities: \"{Hair: Black}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.751Z\",\n    updated_at: \"2019-12-02T06:44:39.751Z\"\n  }, {\n    id: 3,\n    name: \"Marie Alex\",\n    qualities: \"{Hair: Rainbow}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.760Z\",\n    updated_at: \"2019-12-02T06:44:39.760Z\"\n  }, {\n    id: 4,\n    name: \"Roxanne Mecure\",\n    qualities: \"{Hair: Black and white}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.766Z\",\n    updated_at: \"2019-12-02T06:44:39.766Z\"\n  }, {\n    id: 5,\n    name: \"Debra\",\n    qualities: \"{Hair: Black}\",\n    user_id: 1,\n    created_at: \"2019-12-02T06:44:39.772Z\",\n    updated_at: \"2019-12-02T06:44:39.772Z\"\n  }, {\n    id: 6,\n    name: \"Harry Powers\",\n    qualities: \"{}\",\n    user_id: 1,\n    created_at: \"2019-12-02T07:52:26.376Z\",\n    updated_at: \"2019-12-02T07:52:26.376Z\"\n  }],\n  links: [{\n    id: 1,\n    character_id: 1,\n    character2: 2,\n    affiliation: \"Cousin\",\n    created_at: \"2019-12-02T06:44:39.800Z\",\n    updated_at: \"2019-12-02T06:44:39.800Z\"\n  }, {\n    id: 2,\n    character_id: 1,\n    character2: 4,\n    affiliation: \"Friend\",\n    created_at: \"2019-12-02T06:44:39.811Z\",\n    updated_at: \"2019-12-02T06:44:39.811Z\"\n  }, {\n    id: 3,\n    character_id: 2,\n    character2: 3,\n    affiliation: \"Friend\",\n    created_at: \"2019-12-02T06:44:39.819Z\",\n    updated_at: \"2019-12-02T06:44:39.819Z\"\n  }, {\n    id: 4,\n    character_id: 2,\n    character2: 5,\n    affiliation: \"Couple\",\n    created_at: \"2019-12-02T06:44:39.830Z\",\n    updated_at: \"2019-12-02T06:44:39.830Z\"\n  }, {\n    id: 5,\n    character_id: 3,\n    character2: 5,\n    affiliation: \"Friend\",\n    created_at: \"2019-12-02T06:44:39.843Z\",\n    updated_at: \"2019-12-02T06:44:39.843Z\"\n  }]\n};\nvar svg = d3.select(\"body\").append('svg'),\n    width = svg.attr(\"width\"),\n    height = svg.attr(\"height\");\nvar simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n  return d.id;\n})).force(\"charge\", d3.forceManyBody().strength(-400)).force(\"center\", d3.forceCenter(600 / 2, 600 / 2)); // d3.json(\"/characters/all/d3json#\", function(error, graph) {\n//   if (error) throw error;\n\ngraph.links.forEach(function (d) {\n  d.source = d.character_id;\n  d.target = d.character2;\n});\nvar link = svg.append(\"g\").style(\"stroke\", \"#aaa\").selectAll(\"line\").data(graph.links).enter().append(\"line\");\nvar node = svg.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 6).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\nvar label = svg.append(\"g\").attr(\"class\", \"labels\").selectAll(\"text\").data(graph.nodes).enter().append(\"text\").attr(\"class\", \"label\").text(function (d) {\n  return d.name;\n});\nsimulation.nodes(graph.nodes).on(\"tick\", ticked);\nsimulation.force(\"link\").links(graph.links);\n\nfunction ticked() {\n  link.attr(\"x1\", function (d) {\n    return d.source.x;\n  }).attr(\"y1\", function (d) {\n    return d.source.y;\n  }).attr(\"x2\", function (d) {\n    return d.target.x;\n  }).attr(\"y2\", function (d) {\n    return d.target.y;\n  });\n  node.attr(\"r\", 10).style(\"fill\", \"#d9d9d9\").style(\"stroke\", \"#969696\").style(\"stroke-width\", \"1px\").style(\"text-align\", \"center\").attr(\"cx\", function (d) {\n    return d.x + 6;\n  }).attr(\"cy\", function (d) {\n    return d.y - 6;\n  });\n  label.attr(\"x\", function (d) {\n    return d.x;\n  }).attr(\"y\", function (d) {\n    return d.y;\n  }).style(\"font-size\", \"15px\").style(\"fill\", \"#4393c3\");\n} // });\n\n\nfunction dblclick(d) {\n  if (!d3.event.active) {\n    force.alphaTarget(0.3).restart();\n  }\n\n  if (d.fixed == true) {\n    d.fx = null;\n    d.fy = null;\n    d.fixed = false;\n    d3.select(this).select(\"circle\").style(\"fill\", \"#ccc\");\n  } else {\n    d.fx = d.x;\n    d.fy = d.y;\n    d.fixed = true;\n    d3.select(this).select(\"circle\").style(\"fill\", \"red\");\n  }\n}\n\n;\n\nfunction dragstarted(d) {\n  if (!d3.event.active) {\n    simulation.alphaTarget(0.3).restart();\n  }\n\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\n;\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\n;\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n\n  if (d.fixed == true) {\n    d.fx = d.x;\n    d.fy = d.y;\n  } else {\n    d.fx = null;\n    d.fy = null;\n  }\n}\n\n; // function dragstarted(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0.3).restart()\n//   simulation.fix(d);\n// }\n// function dragged(d) {\n//   simulation.fix(d, d3.event.x, d3.event.y);\n// }\n// function dragended(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0);\n//   simulation.unfix(d);\n// }","map":{"version":3,"sources":["/Users/eden/originalProject/GAProject4/othrwrld/app/javascript/packs/d3Graph/test.js"],"names":["console","log","graph","nodes","id","name","qualities","user_id","created_at","updated_at","links","character_id","character2","affiliation","svg","d3","select","append","width","attr","height","simulation","forceSimulation","force","forceLink","d","forceManyBody","strength","forceCenter","forEach","source","target","link","style","selectAll","data","enter","node","call","drag","on","dragstarted","dragged","dragended","label","text","ticked","x","y","dblclick","event","active","alphaTarget","restart","fixed","fx","fy"],"mappings":"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","sourcesContent":["console.log(\"WORKINGS\")\n\nvar graph = {\nnodes: [\n{\nid: 1,\nname: \"Jane Hutton\",\nqualities: \"{Hair: Red}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.738Z\",\nupdated_at: \"2019-12-02T06:44:39.738Z\"\n},\n{\nid: 2,\nname: \"Hiro Smith\",\nqualities: \"{Hair: Black}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.751Z\",\nupdated_at: \"2019-12-02T06:44:39.751Z\"\n},\n{\nid: 3,\nname: \"Marie Alex\",\nqualities: \"{Hair: Rainbow}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.760Z\",\nupdated_at: \"2019-12-02T06:44:39.760Z\"\n},\n{\nid: 4,\nname: \"Roxanne Mecure\",\nqualities: \"{Hair: Black and white}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.766Z\",\nupdated_at: \"2019-12-02T06:44:39.766Z\"\n},\n{\nid: 5,\nname: \"Debra\",\nqualities: \"{Hair: Black}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T06:44:39.772Z\",\nupdated_at: \"2019-12-02T06:44:39.772Z\"\n},\n{\nid: 6,\nname: \"Harry Powers\",\nqualities: \"{}\",\nuser_id: 1,\ncreated_at: \"2019-12-02T07:52:26.376Z\",\nupdated_at: \"2019-12-02T07:52:26.376Z\"\n}\n],\nlinks: [\n{\nid: 1,\ncharacter_id: 1,\ncharacter2: 2,\naffiliation: \"Cousin\",\ncreated_at: \"2019-12-02T06:44:39.800Z\",\nupdated_at: \"2019-12-02T06:44:39.800Z\"\n},\n{\nid: 2,\ncharacter_id: 1,\ncharacter2: 4,\naffiliation: \"Friend\",\ncreated_at: \"2019-12-02T06:44:39.811Z\",\nupdated_at: \"2019-12-02T06:44:39.811Z\"\n},\n{\nid: 3,\ncharacter_id: 2,\ncharacter2: 3,\naffiliation: \"Friend\",\ncreated_at: \"2019-12-02T06:44:39.819Z\",\nupdated_at: \"2019-12-02T06:44:39.819Z\"\n},\n{\nid: 4,\ncharacter_id: 2,\ncharacter2: 5,\naffiliation: \"Couple\",\ncreated_at: \"2019-12-02T06:44:39.830Z\",\nupdated_at: \"2019-12-02T06:44:39.830Z\"\n},\n{\nid: 5,\ncharacter_id: 3,\ncharacter2: 5,\naffiliation: \"Friend\",\ncreated_at: \"2019-12-02T06:44:39.843Z\",\nupdated_at: \"2019-12-02T06:44:39.843Z\"\n}\n]\n}\n\nvar svg = d3.select(\"body\").append('svg'),\n    width = svg.attr(\"width\"),\n    height = svg.attr(\"height\");\n\nvar simulation = d3.forceSimulation()\n    .force(\"link\", d3.forceLink().id(function(d) { return d.id; }))\n    .force(\"charge\", d3.forceManyBody().strength(-400))\n    .force(\"center\", d3.forceCenter(600 / 2 , 600 / 2));\n\n\n// d3.json(\"/characters/all/d3json#\", function(error, graph) {\n//   if (error) throw error;\n\n  graph.links.forEach(function(d){\n    d.source = d.character_id;\n    d.target = d.character2;\n  });\n\n  var link = svg.append(\"g\")\n                .style(\"stroke\", \"#aaa\")\n                .selectAll(\"line\")\n                .data(graph.links)\n                .enter().append(\"line\");\n\n  var node = svg.append(\"g\")\n            .attr(\"class\", \"nodes\")\n  .selectAll(\"circle\")\n            .data(graph.nodes)\n  .enter().append(\"circle\")\n          .attr(\"r\", 6)\n          .call(d3.drag()\n              .on(\"start\", dragstarted)\n              .on(\"drag\", dragged)\n              .on(\"end\", dragended));\n\n  var label = svg.append(\"g\")\n      .attr(\"class\", \"labels\")\n      .selectAll(\"text\")\n      .data(graph.nodes)\n      .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .text(function(d) { return d.name; });\n\n  simulation\n      .nodes(graph.nodes)\n      .on(\"tick\", ticked);\n\n  simulation.force(\"link\")\n      .links(graph.links);\n\n  function ticked() {\n    link\n        .attr(\"x1\", function(d) { return d.source.x; })\n        .attr(\"y1\", function(d) { return d.source.y; })\n        .attr(\"x2\", function(d) { return d.target.x; })\n        .attr(\"y2\", function(d) { return d.target.y; });\n\n    node\n        .attr(\"r\", 10)\n        .style(\"fill\", \"#d9d9d9\")\n        .style(\"stroke\", \"#969696\")\n        .style(\"stroke-width\", \"1px\")\n        .style(\"text-align\",\"center\")\n        .attr(\"cx\", function (d) { return d.x+6; })\n        .attr(\"cy\", function(d) { return d.y-6; });\n\n    label\n        .attr(\"x\", function(d) { return d.x; })\n        .attr(\"y\", function (d) { return d.y; })\n        .style(\"font-size\", \"15px\").style(\"fill\", \"#4393c3\");\n  }\n// });\n\nfunction dblclick(d) {\n  if (!d3.event.active) {\n    force.alphaTarget(0.3).restart();\n  }\n  if (d.fixed == true) {\n    d.fx = null;\n    d.fy = null;\n    d.fixed = false;\n    d3.select(this).select(\"circle\").style(\"fill\", \"#ccc\");\n  }\n  else {\n    d.fx = d.x;\n    d.fy = d.y;\n    d.fixed = true;\n    d3.select(this).select(\"circle\").style(\"fill\", \"red\");\n  }\n};\n\nfunction dragstarted(d) {\n      if (!d3.event.active) {\n        simulation.alphaTarget(0.3).restart();\n      }\n      d.fx = d.x;\n      d.fy = d.y;\n    };\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n};\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n  if (d.fixed == true) {\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n  else {\n    d.fx = null;\n    d.fy = null;\n  }\n};\n\n// function dragstarted(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0.3).restart()\n//   simulation.fix(d);\n// }\n\n// function dragged(d) {\n//   simulation.fix(d, d3.event.x, d3.event.y);\n// }\n\n// function dragended(d) {\n//   if (!d3.event.active) simulation.alphaTarget(0);\n//   simulation.unfix(d);\n// }"]},"metadata":{},"sourceType":"module"}